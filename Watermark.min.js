

! function (t, e) {
	"object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Watermark = e() : t.Watermark = e()
}(window, function () {
	return (r = {}, o.m = n = [function (t, e, n) {
		"use strict";

		function r(t) {
			return (r = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) {
				return typeof t
			} : function (t) {
				return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
			})(t)
		}
		n.r(e);
		var o = function (t) {
				return "function" == typeof HTMLElement ? t instanceof HTMLElement : t && "object" === r(t) && 1 === t.nodeType && "string" == typeof t.nodeName
			},
			i = function (t) {
				return "string" == typeof t
			},
			a = function (t) {
				return null === t
			},
			u = function (t, e) {
				var n = 0;
				if ("string" == typeof t)
					for (var r = 0; r < t.length; r++) n += t.charCodeAt(r) < 128 ? e : 1;
				return n
			};

		function c(t) {
			return function (t) {
				if (Array.isArray(t)) {
					for (var e = 0, n = new Array(t.length); e < t.length; e++) n[e] = t[e];
					return n
				}
			}(t) || function (t) {
				if (Symbol.iterator in Object(t) || "[object Arguments]" === Object.prototype.toString.call(t)) return Array.from(t)
			}(t) || function () {
				throw new TypeError("Invalid attempt to spread non-iterable instance")
			}()
		}

		function s(e, t) {
			var n = Object.keys(e);
			if (Object.getOwnPropertySymbols) {
				var r = Object.getOwnPropertySymbols(e);
				t && (r = r.filter(function (t) {
					return Object.getOwnPropertyDescriptor(e, t).enumerable
				})), n.push.apply(n, r)
			}
			return n
		}

		function l(t, e, n) {
			return e in t ? Object.defineProperty(t, e, {
				value: n,
				enumerable: !0,
				configurable: !0,
				writable: !0
			}) : t[e] = n, t
		}

		function f(t, e) {
			for (var n = 0; n < e.length; n++) {
				var r = e[n];
				r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(t, r.key, r)
			}
		}
		var h = function () {
			function n(t, e) {
				! function (t, e) {
					if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
				}(this, n), void 0 === e ? o(t) || i(t) ? (this.mount(t), this.set()) : (this.$el = null, this.set(t)) : (this.mount(t), this.set(e)), this.canvas = null, this.background = ""
			}
			var t, e, r;
			return t = n, (e = [{
				key: "draw",
				value: function () {
					return o(this.$el) && !a(this.options) && (this.init(), this.drawCanvas(), this.options.auto && this.render(), this.options.observe && this.observe()), this
				}
			}, {
				key: "mount",
				value: function (t) {
					var e = 0 < arguments.length && void 0 !== t ? t : null;
					return this.$el = "string" == typeof e ? document.querySelector(e) : e, this
				}
			}, {
				key: "unMount",
				value: function () {
					return this.$el = null, this
				}
			}, {
				key: "set",
				value: function (t) {
					var e = 0 < arguments.length && void 0 !== t ? t : {};
					return e = function (e) {
						for (var t = 1; t < arguments.length; t++) {
							var n = null != arguments[t] ? arguments[t] : {};
							t % 2 ? s(Object(n), !0).forEach(function (t) {
								l(e, t, n[t])
							}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : s(Object(n)).forEach(function (t) {
								Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t))
							})
						}
						return e
					}({
						textArray: ["example"],
						fontSize: 26,
						fontFamily: "serif",
						padding: 25,
						lineHeight: -1,
						rotate: 0,
						fontScale: .5,
						color: "#eeeeee",
						auto: !0,
						observe: !0
					}, e), this.options = e, this
				}
			}, {
				key: "init",
				value: function () {
					this.initFont(), this.initSize()
				}
			}, {
				key: "initFont",
				value: function () {
					var t = this.options;
					this.options.font = "".concat(t.fontSize, "px ").concat(t.fontFamily), -1 === t.lineHeight && (this.options.lineHeight = 1.25 * t.fontSize)
				}
			}, {
				key: "initSize",
				value: function () {
					var r = this.options,
						t = r.textArray.reduce(function (t, e) {
							var n = u(e, r.fontScale);
							return t < n ? n : t
						}, 0) * r.fontSize + 2 * r.padding,
						e = r.textArray.length * r.lineHeight + 2 * r.padding,
						n = Math.abs(r.rotate),
						o = e * Math.sin(n) + t * Math.cos(n),
						i = e * Math.cos(n) + t * Math.sin(n);
					this.contentWidth = t, this.contentHeight = e, this.ctxWidth = Math.floor(o), this.ctxHeight = Math.floor(i)
				}
			}, {
				key: "drawCanvas",
				value: function () {
					var t = document.createElement("canvas");
					if (t.width = this.ctxWidth, t.height = this.ctxHeight, t.getContext) {
						var o = t.getContext("2d"),
							i = this.options;
						o.translate(10,70),
						o.rotate(i.rotate),
						o.textAlign = "center", 
						o.textBaseline = "middle", 
						o.font = i.font, 
						o.fillStyle = i.color;
						
						var e = this.contentHeight,
							n = Math.abs(i.rotate),
							a = e * Math.cos(n) * Math.sin(n),
							r = Math.PI / 2,
							u = (r + i.rotate) % r,
							s = -e * Math.sin(u) * Math.sin(u);
						i.textArray.forEach(function (t, e) {
							//console.log('t');
							//console.log(t);

							if(e>0) {
								o.font = '12px Microsoft Yahei';
							}
							var n = a + i.padding,
								r = e * i.lineHeight + s + i.padding;
							//console.log('n');
							//console.log(n);
							//console.log('r');
							//console.log(r);
							o.fillText(t, n, r)
						}), this.canvas = t
					}
				}
			}, {
				key: "origin",
				value: function (t) {
					var e = [0, 0];
					return t < 0 && t > -Math.PI / 2 && (e = [0, this.ctxHeight]), e
				}
			}, {
				key: "render",
				value: function () {
					var t = this.canvas.toDataURL();
					return this.$el.style.background = t ? "url(".concat(t, ")") : "", this.background = this.$el.style.background, this
				}
			}, {
				key: "observe",
				value: function () {
					var n = this;
					this.observer && this.observer.disconnect();
					var t = new MutationObserver(function (t) {
						t.forEach(function (t) {
							var e = t.target;
							e.style.background !== n.background && (e.style.background = n.background)
						})
					});
					return t.observe(this.$el, {
						attributes: !0,
						childList: !1,
						attributeFilter: ["style"]
					}), this.observer = t, this
				}
			}, {
				key: "destory",
				value: function () {
					o(this.$el) && (this.$el.style.background = ""), this.observer && this.observer.disconnect(), this.observer = null, this.unMount(), this.set()
				}
			}]) && f(t.prototype, e), r && f(t, r), n
		}();
		e.default = h
	}], o.c = r, o.d = function (t, e, n) {
		o.o(t, e) || Object.defineProperty(t, e, {
			enumerable: !0,
			get: n
		})
	}, o.r = function (t) {
		"undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
			value: "Module"
		}), Object.defineProperty(t, "__esModule", {
			value: !0
		})
	}, o.t = function (e, t) {
		if (1 & t && (e = o(e)), 8 & t) return e;
		if (4 & t && "object" == typeof e && e && e.__esModule) return e;
		var n = Object.create(null);
		if (o.r(n), Object.defineProperty(n, "default", {
				enumerable: !0,
				value: e
			}), 2 & t && "string" != typeof e)
			for (var r in e) o.d(n, r, function (t) {
				return e[t]
			}.bind(null, r));
		return n
	}, o.n = function (t) {
		var e = t && t.__esModule ? function () {
			return t.default
		} : function () {
			return t
		};
		return o.d(e, "a", e), e
	}, o.o = function (t, e) {
		return Object.prototype.hasOwnProperty.call(t, e)
	}, o.p = "", o(o.s = 0)).default;

	function o(t) {
		if (r[t]) return r[t].exports;
		var e = r[t] = {
			i: t,
			l: !1,
			exports: {}
		};
		return n[t].call(e.exports, e, e.exports, o), e.l = !0, e.exports
	}
	var n, r
});
//# sourceMappingURL=Watermark.min.js.map

